<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>шинхВЩщ╗Юцквшбица╝ч│╗ч╡▒</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; }
        .check-button {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .check-button.selected {
            /* шоУщБ╕ф╕нчЪДцМЙщИХцЬЙцЫ┤цШОщбпчЪДщВКцбЖхТМщЩ░х╜▒ */
            border-width: 3px !important;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
            transform: scale(1.02);
        }
        input[type="radio"]:checked + .check-button {
            /* щЗЭх░НщБ╕ф╕нчЪД radio button цЗЙчФи selected цигх╝П */
            border-width: 3px !important;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.2);
            transform: scale(1.02);
        }
        /* цИ┐щЦУчЛАцЕЛцМЗчд║цигх╝П */
        .status-normal { border-bottom: 5px solid #10B981; } /* ч╢ашЙ▓ */
        .status-abnormal { border-bottom: 5px solid #EF4444; } /* ч┤ЕшЙ▓ */
        .status-pending { border-bottom: 5px solid #F59E0B; } /* щ╗ГшЙ▓ */
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">шинхВЩщ╗Юцквч│╗ч╡▒</h1>
            <p class="text-gray-600">ч░бцШУщ╗Юцквшбица╝шИЗч╡▒шиИшиШщМД</p>
        </div>

        <div id="roomSelectionPage" class="max-w-6xl mx-auto">
            <div class="bg-white rounded-xl shadow-lg p-8">
          
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">щБ╕цУЗщ╗ЮцквцИ┐щЦУ</h2>
                    <p class="text-gray-600">шлЛщБ╕цУЗшжБщА▓шбМшинхВЩщ╗ЮцквчЪДцИ┐щЦУ</p>
                </div>
    
                <div class="flex justify-center mb-8">
        
                    <div class="bg-white rounded-lg p-1 shadow-lg">
                        <button id="roomSelectTab" class="nav-tab px-6 py-3 rounded-md font-medium transition-all duration-200 bg-blue-500 text-white" data-target="roomSelectionPage">щБ╕цУЗцИ┐щЦУ</button>
                        <button id="checkTab" class="nav-tab px-6 py-3 rounded-md font-medium transition-all duration-200 text-gray-600 hover:text-blue-500" data-target="checkPage">щ╗Юцквшбица╝</button>
              
                        <button id="statsTab" class="nav-tab px-6 py-3 rounded-md font-medium transition-all duration-200 text-gray-600 hover:text-blue-500" data-target="statsPage">ч╡▒шиИха▒шби</button>
                        <button id="recordsTab" class="nav-tab px-6 py-3 rounded-md font-medium transition-all duration-200 text-gray-600 hover:text-blue-500" data-target="recordsPage">цн╖хП▓шиШщМД</button>
                    </div>
                </div>
        
        
                <div class="flex justify-center mb-8">
                    <div class="bg-gray-100 rounded-lg p-1">
                        <button id="meetingRoomTab" class="px-8 py-3 rounded-md font-medium transition-all duration-200 bg-blue-500 text-white">
                 
                            цЬГшн░ход (12щЦУ)
                        </button>
                        <button id="lectureHallTab" class="px-8 py-3 rounded-md font-medium transition-all duration-200 text-gray-600 hover:text-blue-500">
                            шмЫхаВ (6щЦУ)
  
                        </button>
                    </div>
                </div>
                
                <div id="meetingRoomList" class="space-y-6">
        
                    <div class="text-center text-lg font-medium text-gray-700 mb-6">цЬГшн░ходщБ╕цУЗ</div>
                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                        <button class="room-select-btn meeting-room bg-blue-50 hover:bg-blue-100 border-2 border-blue-200 hover:border-blue-400 rounded-xl p-6 text-center transition-all duration-200 transform hover:scale-105" data-room="цЬГшн░ходA1" data-type="цЬГшн░ход">
                  
                            <div class="text-4xl mb-3">ЁЯПв</div>
                            <div class="text-lg font-semibold text-blue-700">цЬГшн░ходA1</div>
                            <div class="text-sm text-blue-500">1циУцЭ▒хБ┤</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
                        </button>
   
                        <button class="room-select-btn meeting-room bg-blue-50 hover:bg-blue-100 border-2 border-blue-200 hover:border-blue-400 rounded-xl p-6 text-center transition-all duration-200 transform hover:scale-105" data-room="цЬГшн░ходA2" data-type="цЬГшн░ход">
                            <div class="text-4xl mb-3">ЁЯПв</div>
                            <div class="text-lg font-semibold text-blue-700">цЬГшн░ходA2</div>
  
                            <div class="text-sm text-blue-500">1циУше┐хБ┤</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
                        </button>
                        <button class="room-select-btn meeting-room bg-blue-50 hover:bg-blue-100 border-2 border-blue-200 hover:border-blue-400 rounded-xl p-6 text-center transition-all duration-200 transform hover:scale-105" data-room="цЬГшн░ходB1" data-type="цЬГшн░ход">
        
                            <div class="text-4xl mb-3">ЁЯПв</div>
                            <div class="text-lg font-semibold text-blue-700">цЬГшн░ходB1</div>
                            <div class="text-sm text-blue-500">2циУцЭ▒хБ┤</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
                 
                        </button>
                        <button class="room-select-btn meeting-room bg-blue-50 hover:bg-blue-100 border-2 border-blue-200 hover:border-blue-400 rounded-xl p-6 text-center transition-all duration-200 transform hover:scale-105" data-room="цЬГшн░ходB2" data-type="цЬГшн░ход">
                            <div class="text-4xl mb-3">ЁЯПв</div>
                       
                            <div class="text-lg font-semibold text-blue-700">цЬГшн░ходB2</div>
                            <div class="text-sm text-blue-500">2циУше┐хБ┤</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
                        </button>
                         <button class="room-select-btn meeting-room 
                            bg-blue-50 hover:bg-blue-100 border-2 border-blue-200 hover:border-blue-400 rounded-xl p-6 text-center transition-all duration-200 
                            transform hover:scale-105" data-room="цЬГшн░ходC1" data-type="цЬГшн░ход">
                            <div class="text-4xl mb-3">ЁЯПв</div>
                            <div class="text-lg font-semibold text-blue-700">цЬГшн░ходC1</div>
                            <div class="text-sm text-blue-500">3циУцЭ▒хБ┤</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
      
                        </button>
                        <button class="room-select-btn meeting-room bg-blue-50 hover:bg-blue-100 border-2 border-blue-200 hover:border-blue-400 rounded-xl p-6 text-center transition-all duration-200 transform hover:scale-105" data-room="цЬГшн░ходC2" data-type="цЬГшн░ход">
                            <div class="text-4xl mb-3">ЁЯПв</div>
            
                            <div class="text-lg font-semibold text-blue-700">цЬГшн░ходC2</div>
                            <div class="text-sm text-blue-500">3циУше┐хБ┤</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
                        </button>
                        <button class="room-select-btn meeting-room 
                            bg-blue-50 hover:bg-blue-100 border-2 border-blue-200 hover:border-blue-400 rounded-xl p-6 text-center transition-all duration-200 transform hover:scale-105" data-room="цЬГшн░ходD1" data-type="цЬГшн░ход">
                            <div class="text-4xl mb-3">ЁЯПв</div>
                            <div class="text-lg font-semibold text-blue-700">цЬГшн░ходD1</div>
                          
                            <div class="text-sm text-blue-500">4циУцЭ▒хБ┤</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
                        </button>
                        <button class="room-select-btn meeting-room bg-blue-50 hover:bg-blue-100 border-2 border-blue-200 hover:border-blue-400 rounded-xl p-6 text-center transition-all duration-200 transform hover:scale-105" data-room="цЬГшн░ходD2" data-type="цЬГшн░ход">
                            <div class="text-4xl mb-3">ЁЯПв</div>
  
                            <div class="text-lg font-semibold text-blue-700">цЬГшн░ходD2</div>
                            <div class="text-sm text-blue-500">4циУше┐хБ┤</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
                        </button>
                 
                        <button class="room-select-btn meeting-room bg-blue-50 hover:bg-blue-100 border-2 border-blue-200 hover:border-blue-400 rounded-xl p-6 text-center transition-all duration-200 transform hover:scale-105" data-room="цЬГшн░ходE1" data-type="цЬГшн░ход">
                            <div class="text-4xl mb-3">ЁЯПв</div>
                            <div class="text-lg font-semibold text-blue-700">цЬГшн░ходE1</div>
                
                            <div class="text-sm text-blue-500">5циУцЭ▒хБ┤</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
                        </button>
                        <button class="room-select-btn meeting-room bg-blue-50 hover:bg-blue-100 border-2 border-blue-200 hover:border-blue-400 rounded-xl p-6 text-center transition-all duration-200 transform hover:scale-105" data-room="цЬГшн░ходE2" data-type="цЬГшн░ход">
                      
                            <div class="text-4xl mb-3">ЁЯПв</div>
                            <div class="text-lg font-semibold text-blue-700">цЬГшн░ходE2</div>
                            <div class="text-sm text-blue-500">5циУше┐хБ┤</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
                        </button>
       
                        <button class="room-select-btn meeting-room bg-blue-50 hover:bg-blue-100 border-2 border-blue-200 hover:border-blue-400 rounded-xl p-6 text-center transition-all duration-200 transform hover:scale-105" data-room="цЬГшн░ходF1" data-type="цЬГшн░ход">
                            <div class="text-4xl mb-3">ЁЯПв</div>
                            <div class="text-lg font-semibold text-blue-700">цЬГшн░ходF1</div>
      
                            <div class="text-sm text-blue-500">6циУцЭ▒хБ┤</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
                        </button>
                        <button class="room-select-btn meeting-room bg-blue-50 hover:bg-blue-100 border-2 border-blue-200 hover:border-blue-400 rounded-xl p-6 text-center transition-all duration-200 transform hover:scale-105" data-room="цЬГшн░ходF2" data-type="цЬГшн░ход">
            
                            <div class="text-4xl mb-3">ЁЯПв</div>
                            <div class="text-lg font-semibold text-blue-700">цЬГшн░ходF2</div>
                            <div class="text-sm text-blue-500">6циУше┐хБ┤</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
                     
                        </button>
                    </div>
                </div>
                
                <div id="lectureHallList" class="space-y-6 hidden">
                    <div class="text-center text-lg font-medium text-gray-700 mb-6">шмЫхаВщБ╕цУЗ</div>
 
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <button class="room-select-btn lecture-hall bg-purple-50 hover:bg-purple-100 border-2 border-purple-200 hover:border-purple-400 rounded-xl p-6 text-center transition-all duration-200 transform hover:scale-105" data-room="хдзшмЫхаВA" data-type="шмЫхаВ">
                            <div class="text-4xl mb-3">ЁЯОн</div>
      
                            <div class="text-lg font-semibold text-purple-700">хдзшмЫхаВA</div>
                            <div class="text-sm text-purple-500">1циУф╕нхдо - хПпхо╣ч┤Н200ф║║</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
                        </button>
                   
                        <button class="room-select-btn lecture-hall bg-purple-50 hover:bg-purple-100 border-2 border-purple-200 hover:border-purple-400 rounded-xl p-6 text-center transition-all duration-200 transform hover:scale-105" data-room="хдзшмЫхаВB" data-type="шмЫхаВ">
                            <div class="text-4xl mb-3">ЁЯОн</div>
                            <div class="text-lg font-semibold text-purple-700">хдзшмЫхаВB</div>
                  
                            <div class="text-sm text-purple-500">2циУф╕нхдо - хПпхо╣ч┤Н200ф║║</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
                        </button>
                        <button class="room-select-btn lecture-hall bg-purple-50 hover:bg-purple-100 border-2 border-purple-200 hover:border-purple-400 rounded-xl p-6 text-center transition-all duration-200 transform hover:scale-105" data-room="ф╕ншмЫхаВA" data-type="шмЫхаВ">
                      
                            <div class="text-4xl mb-3">ЁЯОк</div>
                            <div class="text-lg font-semibold text-purple-700">ф╕ншмЫхаВA</div>
                            <div class="text-sm text-purple-500">3циУхМЧхБ┤ - хПпхо╣ч┤Н100ф║║</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
                        </button>
     
                        <button class="room-select-btn lecture-hall bg-purple-50 hover:bg-purple-100 border-2 border-purple-200 hover:border-purple-400 rounded-xl p-6 text-center transition-all duration-200 transform hover:scale-105" data-room="ф╕ншмЫхаВB" data-type="шмЫхаВ">
                            <div class="text-4xl mb-3">ЁЯОк</div>
                            <div class="text-lg font-semibold text-purple-700">ф╕ншмЫхаВB</div>
    
                            <div class="text-sm text-purple-500">3циУхНЧхБ┤ - хПпхо╣ч┤Н100ф║║</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
                        </button>
                        <button class="room-select-btn lecture-hall bg-purple-50 hover:bg-purple-100 border-2 border-purple-200 hover:border-purple-400 rounded-xl p-6 text-center transition-all duration-200 transform hover:scale-105" data-room="х░ПшмЫхаВA" data-type="шмЫхаВ">
        
                            <div class="text-4xl mb-3">ЁЯОи</div>
                            <div class="text-lg font-semibold text-purple-700">х░ПшмЫхаВA</div>
                            <div class="text-sm text-purple-500">4циУхМЧхБ┤ - хПпхо╣ч┤Н50ф║║</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
               
                        </button>
                        <button class="room-select-btn lecture-hall bg-purple-50 hover:bg-purple-100 border-2 border-purple-200 hover:border-purple-400 rounded-xl p-6 text-center transition-all duration-200 transform hover:scale-105" data-room="х░ПшмЫхаВB" data-type="шмЫхаВ">
                            <div class="text-4xl mb-3">ЁЯОи</div>
                     
                            <div class="text-lg font-semibold text-purple-700">х░ПшмЫхаВB</div>
                            <div class="text-sm text-purple-500">4циУхНЧхБ┤ - хПпхо╣ч┤Н50ф║║</div>
                            <div class="status-indicator h-1 mt-3 rounded-full"></div>
                        </button>
                    </div>
              
                </div>
                
                <div class="flex justify-center mt-8">
                    <button id="calendarTab" class="px-8 py-3 bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-105 shadow-lg" data-target="calendarSettingPage">
                        ЁЯУЕ щ╗ЮцквщА▒цЬЯшинхоЪшИЗчЫгцОз
  
                    </button>
                </div>
            </div>
        </div>

        <div id="checkPage" class="max-w-4xl mx-auto hidden">
            <div class="bg-white rounded-xl shadow-lg p-8">
                <div class="flex 
                    justify-center mb-8">
                    <div class="bg-white rounded-lg p-1 shadow-lg">
                        <button class="nav-tab px-6 py-3 rounded-md font-medium transition-all duration-200 text-gray-600 hover:text-blue-500" data-target="roomSelectionPage">щБ╕цУЗцИ┐щЦУ</button>
                        <button class="nav-tab px-6 py-3 rounded-md font-medium transition-all duration-200 bg-blue-500 text-white" data-target="checkPage">щ╗Юцквшбица╝</button>
       
                        <button class="nav-tab px-6 py-3 rounded-md font-medium transition-all duration-200 text-gray-600 hover:text-blue-500" data-target="statsPage">ч╡▒шиИха▒шби</button>
                        <button class="nav-tab px-6 py-3 rounded-md font-medium transition-all duration-200 text-gray-600 hover:text-blue-500" data-target="recordsPage">цн╖хП▓шиШщМД</button>
                    </div>
                </div>
   
              
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 class="text-2xl font-semibold text-gray-800">цпПцЧешинхВЩщ╗Юцкв</h2>
                    
                        <div id="roomTitle" class="text-lg font-medium text-blue-600 mt-1 cursor-pointer hover:text-blue-800 hover:underline transition-colors duration-200" title="щ╗ЮцУКщЗНцЦ░щБ╕цУЗцИ┐щЦУ">шлЛхЕИщБ╕цУЗшжБщ╗ЮцквчЪДцИ┐щЦУ</div>
                    </div>
                    <div class="flex items-center gap-2">
                        <label class="text-sm text-gray-500" for="checkDate">щ╗ЮцквцЧецЬЯ</label>
               
                        <input type="date" id="checkDate" class="border rounded-lg px-3 py-2 text-sm">
                    </div>
                </div>

                <div id="roomNotSelectedAlert" class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 hidden">
                    <div class="flex items-center gap-3">
  
                        <div class="text-2xl">тЪая╕П</div>
                        <div>
                            <div class="font-medium text-yellow-800">шлЛхЕИщБ╕цУЗшжБщ╗ЮцквчЪДцИ┐щЦУ</div>
                       
                            <div class="text-sm text-yellow-600">шлЛщ╗ЮцУКф╕КцЦ╣уАМщБ╕цУЗцИ┐щЦУуАНциЩч▒дя╝МщБ╕цУЗшжБщА▓шбМщ╗ЮцквчЪДцИ┐щЦУх╛МхЖНхблхплшбица╝</div>
                        </div>
                    </div>
                </div>

                <form id="checkForm">
                
                    <div class="grid gap-6">
                        <div class="border rounded-lg p-4">
                            <h3 class="font-medium text-gray-700 mb-4">цйЯцв░шинхВЩцквцЯе</h3>
                            <div class="space-y-6">
       
                                <div>
                                    <div class="text-gray-700 font-medium mb-3">цйЯхЩищБЛш╜ЙшБ▓щЯ│цШпхРжцнгх╕╕</div>
                                    
                                    <div class="flex gap-3">
                                        <label class="flex-1">
                                            <input type="radio" name="sound" value="цнгх╕╕" class="hidden">
         
                                            <div class="check-button bg-green-50 border-2 border-green-200 hover:bg-green-100 hover:border-green-300 cursor-pointer rounded-xl p-4 text-center transition-all duration-200">
                                                <div class="text-3xl mb-2">тЬЕ</div>
   
                                                <div class="text-green-700 font-medium">цнгх╕╕</div>
                                            </div>
         
                                        </label>
                                        <label class="flex-1">
                            
                                            <input type="radio" name="sound" value="чХ░х╕╕" class="hidden">
                                            <div class="check-button bg-red-50 border-2 border-red-200 hover:bg-red-100 hover:border-red-300 cursor-pointer rounded-xl p-4 text-center transition-all duration-200">
                        
                                                <div class="text-3xl mb-2">тЭМ</div>
                                                <div class="text-red-700 font-medium">чХ░х╕╕</div>
                        
                                            </div>
                                        </label>
                                        
                                        <label class="flex-1">
                                            <input type="radio" name="sound" value="цЬкщ╗Юцкв" class="hidden" checked>
                                            <div class="check-button bg-gray-50 border-2 border-gray-200 hover:bg-gray-100 
                                                hover:border-gray-300 cursor-pointer rounded-xl p-4 text-center transition-all duration-200">
                                                <div class="text-3xl mb-2">тЮЦ</div>
                                            
                                                <div class="text-gray-700 font-medium">цЬкщ╗Юцкв</div>
                                            </div>
                                        </label>
          
                                    </div>
                                </div>
                                <div>
          
                                    <div class="text-gray-700 font-medium mb-3">ц║лх║жцМЗчд║цШпхРжцнгх╕╕</div>
                                    <div class="flex gap-3">
                                 
                                        <label class="flex-1">
                                            <input type="radio" name="temperature" value="цнгх╕╕" class="hidden">
                                            
                                            <div class="check-button bg-green-50 border-2 border-green-200 hover:bg-green-100 hover:border-green-300 cursor-pointer rounded-xl p-4 text-center transition-all duration-200">
                                                <div class="text-3xl mb-2">ЁЯМбя╕П</div>
                                      
                                                <div class="text-green-700 font-medium">цнгх╕╕</div>
                                            </div>
                                        </label>
    
                                        <label class="flex-1">
                                            <input type="radio" name="temperature" value="чХ░х╕╕" class="hidden">
               
                                            <div class="check-button bg-red-50 border-2 border-red-200 hover:bg-red-100 hover:border-red-300 cursor-pointer rounded-xl p-4 text-center transition-all duration-200">
                                                <div class="text-3xl mb-2">ЁЯФе</div>
         
                                                <div class="text-red-700 font-medium">чХ░х╕╕</div>
                                            </div>
               
                                        </label>
                                        <label class="flex-1">
                                  
                                            <input type="radio" name="temperature" value="цЬкщ╗Юцкв" class="hidden" checked>
                                            <div class="check-button bg-gray-50 border-2 border-gray-200 hover:bg-gray-100 hover:border-gray-300 cursor-pointer rounded-xl p-4 text-center transition-all duration-200">
                             
                                                <div class="text-3xl mb-2">тЮЦ</div>
                                                <div class="text-gray-700 font-medium">цЬкщ╗Юцкв</div>
                             
                                            </div>
                                        </label>
                                    </div>
         
                                </div>
                                <div>
                                    <div class="text-gray-700 font-medium mb-3">ц╜дц╗Сц▓╣ф╜НцШпхРжцнгх╕╕</div>
      
                                    <div class="flex gap-3">
                                        <label class="flex-1">
                           
                                            <input type="radio" name="oil" value="цнгх╕╕" class="hidden">
                                            <div class="check-button bg-green-50 border-2 border-green-200 hover:bg-green-100 hover:border-green-300 cursor-pointer rounded-xl p-4 text-center transition-all duration-200">
                       
                                                <div class="text-3xl mb-2">ЁЯЫвя╕П</div>
                                                <div class="text-green-700 font-medium">цнгх╕╕</div>
                       
                                            </div>
                                        </label>
                                       
                                        <label class="flex-1">
                                            <input type="radio" name="oil" value="чХ░х╕╕" class="hidden">
                                            <div class="check-button 
                                                bg-red-50 border-2 border-red-200 hover:bg-red-100 hover:border-red-300 cursor-pointer rounded-xl p-4 text-center transition-all duration-200">
                                                <div class="text-3xl mb-2">тЪая╕П</div>
                                            
                                                <div class="text-red-700 font-medium">чХ░х╕╕</div>
                                            </div>
                                        </label>
          
                                        <label class="flex-1">
                                            <input type="radio" name="oil" value="цЬкщ╗Юцкв" class="hidden" checked>
                    
                                            <div class="check-button bg-gray-50 border-2 border-gray-200 hover:bg-gray-100 hover:border-gray-300 cursor-pointer rounded-xl p-4 text-center transition-all duration-200">
                                                <div class="text-3xl mb-2">тЮЦ</div>
              
                                                <div class="text-gray-700 font-medium">цЬкщ╗Юцкв</div>
                                            </div>
                    
                                        </label>
                                    </div>
                                </div>
            
                            </div>
                        </div>

                        <div class="border rounded-lg p-4">
                            <h3 class="font-medium text-gray-700 mb-4">хоЙхЕишинхВЩцквцЯе</h3>
  
                            <div class="space-y-6">
                                <div>
                                    <div class="text-gray-700 font-medium mb-3">ч╖КцАехБЬцнвцМЙщИХхКЯшГ╜цШпхРжцнгх╕╕</div>
  
                                    <div class="flex gap-3">
                                        <label class="flex-1">
                       
                                            <input type="radio" name="emergency" value="цнгх╕╕" class="hidden">
                                            <div class="check-button bg-green-50 border-2 border-green-200 hover:bg-green-100 hover:border-green-300 cursor-pointer rounded-xl p-4 text-center transition-all duration-200">
                   
                                                <div class="text-3xl mb-2">ЁЯЫС</div>
                                                <div class="text-green-700 font-medium">цнгх╕╕</div>
                   
                                            </div>
                                        </label>
                                   
                                        <label class="flex-1">
                                            <input type="radio" name="emergency" value="чХ░х╕╕" class="hidden">
                                            <div class="check-button 
                                                bg-red-50 border-2 border-red-200 hover:bg-red-100 hover:border-red-300 cursor-pointer rounded-xl p-4 text-center transition-all duration-200">
                                                <div class="text-3xl mb-2">тЪая╕П</div>
                                        
                                                <div class="text-red-700 font-medium">чХ░х╕╕</div>
                                            </div>
                                        </label>
      
                                        <label class="flex-1">
                                            <input type="radio" name="emergency" value="цЬкщ╗Юцкв" class="hidden" checked>
                
                                            <div class="check-button bg-gray-50 border-2 border-gray-200 hover:bg-gray-100 hover:border-gray-300 cursor-pointer rounded-xl p-4 text-center transition-all duration-200">
                                                <div class="text-3xl mb-2">тЮЦ</div>
          
                                                <div class="text-gray-700 font-medium">цЬкщ╗Юцкв</div>
                                            </div>
                
                                        </label>
                                    </div>
                                </div>
        
                                <div>
                                    <div class="text-gray-700 font-medium mb-3">щШ▓шн╖ч╜йхоМцХ┤цАзцШпхРжцнгх╕╕</div>
                                    <div 
                                        class="flex gap-3">
                                        <label class="flex-1">
                                            <input type="radio" name="guard" value="цнгх╕╕" class="hidden">
          
                                            <div class="check-button bg-green-50 border-2 border-green-200 hover:bg-green-100 hover:border-green-300 cursor-pointer rounded-xl p-4 text-center transition-all duration-200">
                                                <div class="text-3xl mb-2">ЁЯЫбя╕П</div>
    
                                                <div class="text-green-700 font-medium">цнгх╕╕</div>
                                            </div>
          
                                        </label>
                                        <label class="flex-1">
                             
                                            <input type="radio" name="guard" value="чХ░х╕╕" class="hidden">
                                            <div class="check-button bg-red-50 border-2 border-red-200 hover:bg-red-100 hover:border-red-300 cursor-pointer rounded-xl p-4 text-center transition-all duration-200">
                         
                                                <div class="text-3xl mb-2">ЁЯФз</div>
                                                <div class="text-red-700 font-medium">чХ░х╕╕</div>
                         
                                            </div>
                                        </label>
                                        <label 
                                            class="flex-1">
                                            <input type="radio" name="guard" value="цЬкщ╗Юцкв" class="hidden" checked>
                                            <div class="check-button bg-gray-50 border-2 border-gray-200 hover:bg-gray-100 hover:border-gray-300 
                                                cursor-pointer rounded-xl p-4 text-center transition-all duration-200">
                                                <div class="text-3xl mb-2">тЮЦ</div>
                                             
                                                <div class="text-gray-700 font-medium">цЬкщ╗Юцкв</div>
                                            </div>
                                        </label>
           
                                    </div>
                                </div>
                            </div>
               
                        </div>

                        <div class="border rounded-lg p-4">
                            <h3 class="font-medium text-gray-700 mb-4">хВЩши╗шккцШО</h3>
                            <textarea id="remarks" class="w-full p-3 border 
                                rounded-lg resize-none rows=3" placeholder="шлЛш╝╕хЕечХ░х╕╕чЛАц│БцИЦхЕ╢ф╗ЦщЬАшжБшккцШОчЪДф║ЛщаЕ..."></textarea>
                        </div>

                        <div class="border rounded-lg p-4">
                            <h3 class="font-medium text-gray-700 mb-4">щ╗Юцквф║║хУб</h3>
               
                            <input type="text" id="inspector" class="w-full p-3 border rounded-lg" placeholder="шлЛш╝╕хЕещ╗Юцквф║║хУбхзУхРН">
                        </div>

                        <button type="submit" id="submitBtn" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-4 rounded-lg transition-colors duration-200">
                     
                            цПРф║дщ╗Юцквшбица╝
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <div id="submitModal" class="fixed inset-0 bg-black 
            bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4 transform transition-all duration-300 scale-95">
                <div class="text-center">
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 
                            h-8 text-green-500 fill-none stroke=currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
              
                    <div class="mb-6">
                        <div class="text-lg font-medium text-gray-800 mb-2" id="modalRoomTitle"></div>
                        <div class="text-md text-gray-600 mb-4" id="modalInspector"></div>
                
                    </div>
                    
                    <div class="text-3xl font-bold text-green-600 mb-4">щ╗ЮцквцИРхКЯя╝Б</div>
                    <p class="text-gray-500 mb-6">ш│ЗцЦЩх╖▓хоЙхЕишиШщМДхИ░ Google шйжчоЧшбия╝Иф╕жх╖▓хД▓хнШшЗ│чАПшж╜хЩицЬмхЬ░шиШщМДя╝ЙуАВ</p>
                
            
                        <button id="confirmSubmit" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 rounded-lg transition-colors duration-200">
                        чв║шкНф╕жш┐ФхЫЮ
                    </button>
                </div>
            </div>
        </div>
  
       
        <div id="statsPage" class="max-w-6xl mx-auto hidden">
            <div class="bg-white rounded-xl shadow-lg p-8">
                <div class="flex justify-center mb-8">
                    <div class="bg-white rounded-lg p-1 shadow-lg">
                        <button class="nav-tab px-6 py-3 rounded-md font-medium transition-all duration-200 text-gray-600 hover:text-blue-500" data-target="roomSelectionPage">щБ╕цУЗцИ┐щЦУ</button>
                        <button class="nav-tab px-6 py-3 rounded-md font-medium transition-all duration-200 text-gray-600 hover:text-blue-500" data-target="checkPage">щ╗Юцквшбица╝</button>
                        <button class="nav-tab px-6 py-3 rounded-md font-medium transition-all duration-200 bg-blue-500 text-white" data-target="statsPage">ч╡▒шиИха▒шби</button>
                        <button class="nav-tab px-6 py-3 rounded-md font-medium transition-all duration-200 text-gray-600 hover:text-blue-500" data-target="recordsPage">цн╖хП▓шиШщМД</button>
                    </div>
                </div>
                
                <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">щ╗Юцквч╡▒шиИцХ╕цУЪ</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-green-100 p-6 rounded-xl shadow-md text-center">
                        <div class="text-4xl font-bold text-green-700" id="totalChecks">0</div>
                        <div class="text-gray-600 mt-2">ч╕╜щ╗ЮцквцмбцХ╕</div>
                    </div>
                    <div class="bg-red-100 p-6 rounded-xl shadow-md text-center">
                        <div class="text-4xl font-bold text-red-700" id="abnormalCount">0</div>
                        <div class="text-gray-600 mt-2">чХ░х╕╕ч┤АщМДцмбцХ╕</div>
                    </div>
                    <div class="bg-yellow-100 p-6 rounded-xl shadow-md text-center">
                        <div class="text-4xl font-bold text-yellow-700" id="pendingRooms">0</div>
                        <div class="text-gray-600 mt-2">х╛Ещ╗ЮцквцИ┐щЦУцХ╕</div>
                    </div>
                </div>
                
                <h3 class="text-2xl font-semibold text-gray-800 border-b pb-2 mb-4">ш┐СцЬЯщ╗Юцквч┤АщМД (цЬАш┐С 5 чнЖ)</h3>
                <div id="historyList" class="space-y-4">
                    <p class="text-center text-gray-500">ш╝ЙхЕеф╕н...</p>
                </div>
            </div>
        </div>
        
        <div id="recordsPage" class="max-w-6xl mx-auto hidden">
            <div class="bg-white rounded-xl shadow-lg p-8">
                 <div class="flex justify-center mb-8">
                    <div class="bg-white rounded-lg p-1 shadow-lg">
                        <button class="nav-tab px-6 py-3 rounded-md font-medium transition-all duration-200 text-gray-600 hover:text-blue-500" data-target="roomSelectionPage">щБ╕цУЗцИ┐щЦУ</button>
                        <button class="nav-tab px-6 py-3 rounded-md font-medium transition-all duration-200 text-gray-600 hover:text-blue-500" data-target="checkPage">щ╗Юцквшбица╝</button>
                        <button class="nav-tab px-6 py-3 rounded-md font-medium transition-all duration-200 text-gray-600 hover:text-blue-500" data-target="statsPage">ч╡▒шиИха▒шби</button>
                        <button class="nav-tab px-6 py-3 rounded-md font-medium transition-all duration-200 bg-blue-500 text-white" data-target="recordsPage">цн╖хП▓шиШщМД</button>
                    </div>
                </div>

                <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">цн╖хП▓щ╗ЮцквшиШщМД</h2>
                
                <div class="flex justify-center mb-6 space-x-4">
                    <div>
                        <label for="historyFilterRoom" class="block text-sm font-medium text-gray-700">цИ┐щЦУчпйщБ╕</label>
                        <select id="historyFilterRoom" class="p-2 border rounded-md">
                            <option value="all">цЙАцЬЙцИ┐щЦУ</option>
                            </select>
                    </div>
                    <div>
                        <label for="historyFilterStatus" class="block text-sm font-medium text-gray-700">чЛАцЕЛчпйщБ╕</label>
                        <select id="historyFilterStatus" class="p-2 border rounded-md">
                            <option value="all">хЕищГичЛАцЕЛ</option>
                            <option value="normal">цнгх╕╕</option>
                            <option value="abnormal">чХ░х╕╕</option>
                        </select>
                    </div>
                </div>
                
                <div id="fullHistoryList" class="space-y-4">
                    <p class="text-center text-gray-500">ш╝ЙхЕеф╕н...</p>
                </div>
            </div>
        </div>
        
        <div id="calendarSettingPage" class="max-w-6xl mx-auto hidden">
            <div class="bg-white rounded-xl shadow-lg p-8 relative"> 
                <button id="backToHomeFromCalendar" 
                        class="absolute top-6 left-6 text-gray-500 hover:text-blue-600 flex items-center transition-colors font-medium">
                    <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17l-5-5m0 0l5-5m-5 5h12"></path></svg>
                    ш┐ФхЫЮцИ┐щЦУщБ╕цУЗ
                </button>
                
                <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center pt-2">шинхВЩщ╗ЮцквщА▒цЬЯшинхоЪшИЗцОТчиЛ (цибцУм)</h2>
                <p class="text-gray-600 mb-6 text-center">цВихПпф╗ечВ║цпПхАЛцИ┐щЦУшинхоЪф╕НхРМчЪДщ╗ЮцквщА▒цЬЯя╝Мч│╗ч╡▒х░Зца╣цУЪф╕Кцмбщ╗ЮцквцЧецЬЯцибцУмшиИчоЧф╕ЛцмбцОТчиЛцЧецЬЯуАВ</p>
                
                <div id="cycleList" class="space-y-4">
                    <p class="text-center text-gray-500">ш╝ЙхЕеф╕н...</p>
                </div>
            </div>
        </div>

        <div id="historyDetailModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-xl shadow-2xl p-8 max-w-lg w-full mx-4">
                <h3 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">щ╗Юцквшй│ч┤░ч┤АщМД</h3>
                <div id="historyDetails" class="space-y-3 text-gray-700">
                    </div>
                <button id="closeHistoryDetailModal" class="mt-6 w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 rounded-lg transition-colors">
                    щЧЬщЦЙ
                </button>
            </div>
        </div>
        
        <div id="cycleSettingFormModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-xl shadow-2xl p-8 max-w-md w-full mx-4">
                <h3 class="text-2xl font-bold text-gray-800 mb-4 border-b pb-2" id="cycleModalRoomTitle">шинхоЪщ╗ЮцквщА▒цЬЯ</h3>
                <form id="cycleSettingForm">
                    <input type="hidden" id="cycleSettingRoomName">
                    
                    <div class="mb-4">
                        <label for="cycleFrequency" class="block text-sm font-medium text-gray-700 mb-1">щ╗Юцквща╗чОЗ</label>
                        <select id="cycleFrequency" class="w-full p-3 border rounded-lg">
                            <option value="none">ф╕НшинхоЪ/цЪлхБЬ</option>
                            <option value="daily">цпПцЧе</option>
                            <option value="weekly">цпПщА▒</option>
                            <option value="monthly">цпПцЬИ</option>
                        </select>
                    </div>

                    <div id="weeklyOptions" class="mb-4 hidden">
                        <label for="cycleDayOfWeek" class="block text-sm font-medium text-gray-700 mb-1">щБ╕цУЗщА▒х╣╛</label>
                        <select id="cycleDayOfWeek" class="w-full p-3 border rounded-lg">
                            <option value="1">щА▒ф╕А</option>
                            <option value="2">щА▒ф║М</option>
                            <option value="3">щА▒ф╕Й</option>
                            <option value="4">щА▒хЫЫ</option>
                            <option value="5">щА▒ф║Ф</option>
                            <option value="6">щА▒хЕн</option>
                            <option value="0">щА▒цЧе</option>
                        </select>
                    </div>
                    
                    <div id="monthlyOptions" class="mb-4 hidden">
                        <label for="cycleDayOfMonth" class="block text-sm font-medium text-gray-700 mb-1">щБ╕цУЗцпПцЬИх╣╛шЩЯ (1-28)</label>
                        <input type="number" id="cycleDayOfMonth" class="w-full p-3 border rounded-lg" min="1" max="28" value="1">
                    </div>

                    <div class="flex gap-4 mt-6">
                        <button type="button" id="closeCycleSettingModal" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-3 rounded-lg transition-colors">хПЦц╢И</button>
                        <button type="submit" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 rounded-lg transition-colors">хД▓хнШшинхоЪ</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="duplicateModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden"></div>
        <div id="cycleNotSetModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden"></div>
    </div>

<script>
    // ***********************************************
    // тЪая╕П цнещйЯф║МхоМцИРх╛Мя╝МшлЛхЛЩх┐Ех░З 'YOUR_WEB_APP_URL_HERE' цЫ┐цПЫчВ║цВичЪДхпжщЪЫщГич╜▓ч╢▓хЭА тЪая╕П
    // ***********************************************
    const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbw7jYa_tFAaVSDKkZ728j9faA5OcoKB1nMvGQ6txBonnR36fIkS2YDK0aZNPOr2-vNf/exec';
    let selectedRoom = { type: null, name: null };
    
    // --- цибцУмцХ╕цУЪ (ф╜┐чФи localStorage хД▓хнШщ╗Юцквцн╖хП▓ч┤АщМДшИЗщА▒цЬЯшинхоЪ) ---
    // хИЭхзЛцХ╕цУЪцИЦх╛Ю localStorage ш╝ЙхЕе
    let roomData = JSON.parse(localStorage.getItem('roomData')) || [];

    const saveRoomData = () => {
        localStorage.setItem('roomData', JSON.stringify(roomData));
    };

    const getAllRooms = () => roomData;

    // хПЦх╛ЧцИ┐щЦУчЪДцЬАцЦ░чЛАцЕЛ
    const getRoomStatus = (roomName) => {
        const room = roomData.find(r => r.name === roomName);
        if (!room || room.history.length === 0) return 'pending';
        // цн╖хП▓шиШщМДцЬАцЦ░чЪД if (isAbnormal) -> 'abnormal'
        if (room.history[room.history.length - 1].isAbnormal) return 'abnormal';
        return 'normal';
    };

    // ца╣цУЪ roomData цЫ┤цЦ░цИ┐щЦУщБ╕цУЗцМЙщИХчЪДчЛАцЕЛцМЗчд║чЗИ
    const updateRoomButtonStatus = () => {
        const allRooms = getAllRooms();
        document.querySelectorAll('.room-select-btn').forEach(btn => {
            const roomName = btn.getAttribute('data-room');
            const indicator = btn.querySelector('.status-indicator');
            
            // цЙ╛хЗ║х░НцЗЙчЪД room object
            let room = allRooms.find(r => r.name === roomName);
            
            if (!room) {
                 // хжВцЮЬцШпцЦ░цИ┐щЦУя╝Мх░ЗхЕ╢хКахЕе roomData (чв║ф┐ЭцЙАцЬЙцИ┐щЦУщГ╜швлш┐╜ш╣д)
                const newRoom = { 
                    id: Date.now() + Math.random(), 
                    name: roomName, 
                    type: btn.getAttribute('data-type'), 
                    status: "pending", 
                    history: [],
                    cycle: { frequency: 'none', details: null } // ЁЯМЯ цЦ░хвЮщА▒цЬЯшинхоЪ
                };
                roomData.push(newRoom);
                room = newRoom;
            }

            // щЗНцЦ░шиИчоЧф╕жшинхоЪчЛАцЕЛ
            const status = getRoomStatus(roomName);
            room.status = status; // цЫ┤цЦ░хЕзхнШф╕нчЪДчЛАцЕЛ

            indicator.classList.remove('status-normal', 'status-abnormal', 'status-pending');
            
            if (status === 'normal') {
                indicator.classList.add('status-normal');
                indicator.title = "ф╕Кцмбщ╗Юцквцнгх╕╕";
            } else if (status === 'abnormal') {
                indicator.classList.add('status-abnormal');
                indicator.title = "ф╕Кцмбщ╗ЮцквчХ░х╕╕";
            } else { // pending
                indicator.classList.add('status-pending');
                indicator.title = "х╛Ещ╗ЮцквцИЦчДбч┤АщМД";
            }
        });
        saveRoomData(); // чв║ф┐ЭцЦ░цИ┐щЦУшвлхД▓хнШ
        updateStats(); // цЫ┤цЦ░ч╡▒шиИцХ╕цУЪ
    };
    
    // --- ш╝ФхКйхЗ╜цХ╕я╝Ъщбпчд║щаБщЭв ---
    function showPage(pageId) {
        document.querySelectorAll('#roomSelectionPage, #checkPage, #statsPage, #recordsPage, #calendarSettingPage').forEach(page => {
            page.classList.add('hidden');
        });
        document.getElementById(pageId).classList.remove('hidden');

        // цЫ┤цЦ░х░ОшИкциЩч▒дчЪДчЛАцЕЛ
        document.querySelectorAll('.nav-tab').forEach(tab => {
            if (tab.getAttribute('data-target') === pageId) {
                tab.classList.add('bg-blue-500', 'text-white');
                tab.classList.remove('text-gray-600', 'hover:text-blue-500');
            } else {
                tab.classList.remove('bg-blue-500', 'text-white');
                tab.classList.add('text-gray-600', 'hover:text-blue-500');
            }
        });

        // ЁЯМЯ щЗЭх░НчЙ╣хоЪщаБщЭвхЯ╖шбМхИЭхзЛхМЦхЗ╜цХ╕
        if (pageId === 'statsPage') {
            updateStatsPage();
        } else if (pageId === 'recordsPage') {
            initializeRecordsPage();
            updateFullHistoryList();
        } else if (pageId === 'calendarSettingPage') { // ЁЯМЯ цЦ░хвЮя╝Ъш╝ЙхЕещА▒цЬЯшинхоЪщаБщЭв
            renderCycleListPage();
        }
    }

    // --- ч╡▒шиИхТМцн╖хП▓ч┤АщМДщВПш╝п (ф┐ЭцМБф╕НшоК) ---
    const updateStats = () => {
        const allRooms = getAllRooms();
        const allHistory = allRooms.flatMap(r => 
            r.history.map(h => ({ ...h, roomName: r.name, roomType: r.type }))
        );

        if (document.getElementById('totalChecks')) {
            document.getElementById('totalChecks').innerText = allHistory.length;
            document.getElementById('abnormalCount').innerText = allHistory.filter(h => h.isAbnormal).length;
            
            let pendingCount = 0;
            allRooms.forEach(room => {
                const status = getRoomStatus(room.name);
                if (status === 'pending') {
                    pendingCount++;
                }
            });
            document.getElementById('pendingRooms').innerText = pendingCount;
        }
    };

    const updateStatsPage = () => {
        updateStats();
        const historyList = document.getElementById('historyList');
        const allHistory = getAllRooms().flatMap(room => 
            room.history.map(h => ({ ...h, roomName: room.name, roomType: room.type }))
        ).sort((a, b) => new Date(b.date) - new Date(a.date)).slice(0, 5);
        
        historyList.innerHTML = '';
        if (allHistory.length === 0) {
            historyList.innerHTML = '<p class="text-center text-gray-500 mt-4">чДбч┤АщМДуАВ</p>';
            return;
        }
        
        allHistory.forEach(h => {
            historyList.innerHTML += `<div class="p-3 border rounded-lg bg-gray-50">${h.date} - ${h.roomName} (${h.isAbnormal ? 'чХ░х╕╕' : 'цнгх╕╕'}) by ${h.inspector}</div>`;
        });
    };

    const initializeRecordsPage = () => {
        const roomSelect = document.getElementById('historyFilterRoom');
        if (roomSelect && roomSelect.options.length <= 1) { 
            roomSelect.innerHTML = '<option value="all">цЙАцЬЙцИ┐щЦУ</option>';
            getAllRooms().forEach(room => {
                const option = document.createElement('option');
                option.value = room.name;
                option.textContent = `${room.type} - ${room.name}`;
                roomSelect.appendChild(option);
            });
            
            roomSelect.addEventListener('change', updateFullHistoryList);
            document.getElementById('historyFilterStatus').addEventListener('change', updateFullHistoryList);
            document.getElementById('closeHistoryDetailModal').addEventListener('click', () => {
                 document.getElementById('historyDetailModal').classList.add('hidden');
            });
        }
    };

    const updateFullHistoryList = () => {
        const historyList = document.getElementById('fullHistoryList');
        historyList.innerHTML = '';

        const filterRoom = document.getElementById('historyFilterRoom')?.value || 'all';
        const filterStatus = document.getElementById('historyFilterStatus')?.value || 'all';

        const allHistory = getAllRooms().flatMap(room => 
            room.history.map(h => ({ ...h, roomName: room.name, roomType: room.type }))
        ).sort((a, b) => new Date(b.date) - new Date(a.date));

        const filteredHistory = allHistory.filter(h => {
            const roomMatch = filterRoom === 'all' || h.roomName === filterRoom;
            const statusMatch = filterStatus === 'all' || 
                                (filterStatus === 'normal' && !h.isAbnormal) || 
                                (filterStatus === 'abnormal' && h.isAbnormal);
            return roomMatch && statusMatch;
        });

        if (filteredHistory.length === 0) {
             historyList.innerHTML = '<p class="text-center text-gray-500 mt-4">чДбчмжхРИцвЭф╗╢чЪДч┤АщМДуАВ</p>';
             return;
        }

        filteredHistory.forEach(h => {
            const status = h.isAbnormal ? 'чХ░х╕╕' : 'цнгх╕╕';
            const statusClass = h.isAbnormal ? 'border-red-500 bg-red-50' : 'border-green-500 bg-green-50';
            
            const historyDiv = document.createElement('div');
            historyDiv.className = `p-4 border-l-4 ${statusClass} rounded-lg shadow-sm flex justify-between items-center transition duration-150`;
            historyDiv.innerHTML = `
                <div>
                    <div class="font-semibold text-gray-800">${h.roomType} - ${h.roomName}</div>
                    <div class="text-sm text-gray-600">цЧецЬЯ: ${h.date} | чЛАцЕЛ: <span class="font-bold text-${h.isAbnormal ? 'red' : 'green'}-700">${status}</span> | ф║║хУб: ${h.inspector}</div>
                </div>
                <button class="text-sm text-blue-600 hover:text-blue-800 font-medium detail-btn" data-id="${h.id}">
                    цЯечЬЛшй│цГЕ
                </button>
            `;
            historyDiv.querySelector('.detail-btn').onclick = () => showHistoryDetails(h);
            historyList.appendChild(historyDiv);
        });
    };

    const showHistoryDetails = (history) => {
        const detailsDiv = document.getElementById('historyDetails');
        detailsDiv.innerHTML = `
            <p><strong>цИ┐щЦУ:</strong> ${history.roomType} - ${history.roomName}</p>
            <p><strong>цЧецЬЯ:</strong> ${history.date}</p>
            <p><strong>щ╗Юцквф║║хУб:</strong> ${history.inspector}</p>
            <div class="mt-3 pt-3 border-t">
                <p><strong>щБЛш╜ЙшБ▓щЯ│:</strong> <span class="text-${history.sound === 'цнгх╕╕' ? 'green' : 'red'}-600">${history.sound}</span></p>
                <p><strong>ц║лх║жцМЗчд║:</strong> <span class="text-${history.temperature === 'цнгх╕╕' ? 'green' : 'red'}-600">${history.temperature}</span></p>
                <p><strong>ц╜дц╗Сц▓╣ф╜Н:</strong> <span class="text-${history.oil === 'цнгх╕╕' ? 'green' : 'red'}-600">${history.oil}</span></p>
                <p><strong>ч╖КцАехБЬцнв:</strong> <span class="text-${history.emergency === 'цнгх╕╕' ? 'green' : 'red'}-600">${history.emergency}</span></p>
                <p><strong>щШ▓шн╖ч╜й:</strong> <span class="text-${history.guard === 'цнгх╕╕' ? 'green' : 'red'}-600">${history.guard}</span></p>
            </div>
            <div class="mt-3 pt-3 border-t">
                <p><strong>хВЩши╗:</strong> ${history.remarks || 'чДб'}</p>
            </div>
        `;
        document.getElementById('historyDetailModal').classList.remove('hidden');
    };
    
    // --- ЁЯМЯ щ╗ЮцквщА▒цЬЯшинхоЪщВПш╝п ЁЯМЯ ---
    
    const WEEKDAY_MAP = {
        '0': 'щА▒цЧе', '1': 'щА▒ф╕А', '2': 'щА▒ф║М', '3': 'щА▒ф╕Й', 
        '4': 'щА▒хЫЫ', '5': 'щА▒ф║Ф', '6': 'щА▒хЕн'
    };
    const FREQUENCY_MAP = {
        'daily': 'цпПцЧещ╗Юцкв', 'weekly': 'цпПщА▒щ╗Юцкв', 'monthly': 'цпПцЬИщ╗Юцкв', 'none': 'цЬкшинхоЪ/цЪлхБЬ'
    };

    // цибцУмшиИчоЧф╕Лцмбщ╗ЮцквцЧецЬЯ
    const getNextCheckDate = (lastCheckDate, frequency, dayDetails) => {
        let date = lastCheckDate ? new Date(lastCheckDate) : new Date(); // х╛Юф╕Кцмбщ╗ЮцквцЧещЦЛхзЛцИЦф╗Кхдй
        date.setHours(0,0,0,0);
        let today = new Date();
        today.setHours(0,0,0,0);

        if (lastCheckDate) {
            // хжВцЮЬцЬЙф╕Кцмбч┤АщМДя╝Мф╕ЛцмбцквцЯецЧех╛Юф╕Кцмбч┤АщМДчЪДщЪФхдйщЦЛхзЛчоЧ
            date.setDate(date.getDate() + 1);
        } else {
            // хжВцЮЬц▓ТцЬЙч┤АщМДя╝Мх╛Юф╗КхдйщЦЛхзЛчоЧ
            date = today;
        }

        if (frequency === 'daily') {
            return date.toLocaleDateString('zh-TW', { year: 'numeric', month: '2-digit', day: '2-digit' });
        } else if (frequency === 'weekly') {
            const targetDay = parseInt(dayDetails); // 0 (Sun) to 6 (Sat)
            let currentDay = date.getDay(); // 0-6

            let daysToAdd = (targetDay - currentDay + 7) % 7;
            
            // шЩХчРЖх╛кчТ░щВПш╝пя╝ЪхжВцЮЬшиИчоЧч╡РцЮЬцШпф╗Кхдйя╝Мф╕ФцШпх╛Юф╗КхдйщЦЛхзЛчоЧчЪД (чДб lastCheckDate)я╝МхЙЗх░ЗцЧецЬЯцОихИ░ф╕ЛщА▒уАВ
            // хжВцЮЬцШпх╛Ю lastCheckDate+1 щЦЛхзЛчоЧчЪДя╝МхЙЗ daysToAdd=0 цЙНцШпф╗КхдйуАВ
            if (daysToAdd === 0 && lastCheckDate) {
                // хжВцЮЬ lastCheckDate цШпчЫоциЩцЧея╝Мф╕ФцИСхАСх╛ЮщЪФхдйщЦЛхзЛчоЧя╝МхЙЗ daysToAdd=0 шбичд║чЫоциЩцЧех╖▓ч╢УхЬиф╕ЛщА▒
                daysToAdd = 7;
            } else if (daysToAdd === 0 && !lastCheckDate) {
                 // хжВцЮЬф╗КхдйцШпчЫоциЩцЧея╝Мф╕Фц▓ТцЬЙцн╖хП▓ч┤АщМДя╝Мф╣ЯцОихИ░ф╕ЛщА▒
                 daysToAdd = 7;
            }

            date.setDate(date.getDate() + daysToAdd);
            return date.toLocaleDateString('zh-TW', { year: 'numeric', month: '2-digit', day: '2-digit' });

        } else if (frequency === 'monthly') {
            const targetDay = parseInt(dayDetails); // 1 to 28
            let targetMonth = date.getMonth();
            let targetYear = date.getFullYear();

            // хжВцЮЬф╗КхдйцИЦф╕Кцмбщ╗ЮцквцЧех╖▓ч╢УщБОф║ЖчЫоциЩцЧецЬЯя╝МхЙЗшинхоЪчВ║ф╕ЛхАЛцЬИ
            if (date.getDate() > targetDay) {
                targetMonth += 1;
            }
            
            let nextDate = new Date(targetYear, targetMonth, targetDay);
            // DateцЬГшЗкхЛХшЩХчРЖцЬИф╗╜ц║вхЗ║хИ░ф╕Лф╕Ах╣┤
            
            return nextDate.toLocaleDateString('zh-TW', { year: 'numeric', month: '2-digit', day: '2-digit' });
        }
        
        return 'чДбцОТчиЛ';
    };

    const renderCycleListPage = () => {
        const cycleListDiv = document.getElementById('cycleList');
        cycleListDiv.innerHTML = '';
        
        const allRooms = getAllRooms();
        
        allRooms.forEach(room => {
            const lastHistory = room.history.length > 0 ? room.history[room.history.length - 1] : null;
            const lastCheckDate = lastHistory ? lastHistory.date : null;
            
            let cycleInfo = room.cycle || { frequency: 'none', details: null };
            let displayCycle = 'цЬкшинхоЪщА▒цЬЯ';
            let nextCheckDate = 'чДбцОТчиЛ';
            let nextCheckStatus = 'bg-gray-400 text-white';
            
            if (cycleInfo.frequency !== 'none') {
                nextCheckDate = getNextCheckDate(lastCheckDate, cycleInfo.frequency, cycleInfo.details);
                displayCycle = FREQUENCY_MAP[cycleInfo.frequency];
                
                if (cycleInfo.frequency === 'weekly') {
                    displayCycle += ` (${WEEKDAY_MAP[cycleInfo.details]})`;
                } else if (cycleInfo.frequency === 'monthly') {
                    displayCycle += ` (цпПцЬИ ${cycleInfo.details} шЩЯ)`;
                }

                // ч░бхЦохИдцЦ╖цОТчиЛчЛАцЕЛ
                const nextDateObj = new Date(nextCheckDate.replace(/\//g, '-')); // шЩХчРЖцЧецЬЯца╝х╝П
                const today = new Date();
                today.setHours(0,0,0,0);
                
                if (nextCheckDate === 'чДбцОТчиЛ') {
                     nextCheckStatus = 'bg-gray-400 text-white';
                } else if (nextDateObj.getTime() < today.getTime()) {
                     nextCheckStatus = 'bg-red-600 text-white'; // х╖▓щА╛цЬЯ
                     nextCheckDate += ' (х╖▓щА╛цЬЯ)';
                } else if (nextDateObj.getTime() === today.getTime()) {
                     nextCheckStatus = 'bg-yellow-500 text-white'; // ф╗Кхдй
                     nextCheckDate += ' (ф╗КхдйцОТчиЛ)';
                } else {
                     nextCheckStatus = 'bg-green-600 text-white'; // цнгх╕╕цОТчиЛ
                }
            }

            const roomDiv = document.createElement('div');
            roomDiv.className = "p-4 border rounded-xl shadow-sm flex justify-between items-center bg-white hover:shadow-md transition-shadow";
            roomDiv.innerHTML = `
                <div>
                    <div class="font-bold text-lg text-gray-800">${room.type} - ${room.name}</div>
                    <div class="text-sm text-gray-600">ф╕Кцмбщ╗Юцкв: ${lastCheckDate || 'чДбч┤АщМД'}</div>
                    <div class="text-sm text-gray-600 mt-1">чЫохЙНщА▒цЬЯ: ${displayCycle}</div>
                </div>
                <div class="text-right flex flex-col items-end">
                    <div class="px-3 py-1 rounded-full text-xs font-semibold ${nextCheckStatus} mb-2">
                        ${nextCheckDate}
                    </div>
                    <button class="text-sm text-blue-600 hover:text-blue-800 font-medium set-cycle-btn" data-room-name="${room.name}">
                        тЪЩя╕П шинхоЪщА▒цЬЯ
                    </button>
                </div>
            `;
            cycleListDiv.appendChild(roomDiv);
        });
        
        // ч╢БхоЪшинхоЪцМЙщИХф║Лф╗╢
        document.querySelectorAll('.set-cycle-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const roomName = e.currentTarget.getAttribute('data-room-name');
                openCycleSettingModal(roomName);
            });
        });
    };

    const openCycleSettingModal = (roomName) => {
        const room = roomData.find(r => r.name === roomName);
        if (!room) return;
        
        document.getElementById('cycleModalRoomTitle').textContent = `шинхоЪ ${room.type} - ${room.name} чЪДщ╗ЮцквщА▒цЬЯ`;
        document.getElementById('cycleSettingRoomName').value = roomName;
        
        // ш╝ЙхЕечХ╢хЙНшинхоЪ
        const currentCycle = room.cycle || { frequency: 'none', details: null };
        document.getElementById('cycleFrequency').value = currentCycle.frequency;
        
        // шз╕чЩ╝ frequency change ф║Лф╗╢ф╛Жщбпчд║х░НцЗЙчЪДч┤░чпАщБ╕щаЕ
        const frequencyChange = new Event('change');
        document.getElementById('cycleFrequency').dispatchEvent(frequencyChange);
        
        if (currentCycle.frequency === 'weekly' && currentCycle.details !== null) {
            document.getElementById('cycleDayOfWeek').value = currentCycle.details;
        } else if (currentCycle.frequency === 'monthly' && currentCycle.details !== null) {
            document.getElementById('cycleDayOfMonth').value = currentCycle.details;
        }
        
        document.getElementById('cycleSettingFormModal').classList.remove('hidden');
    };
    
    // --- ш╝ФхКйхЗ╜цХ╕я╝ЪхИЭхзЛхМЦшИЗф║Лф╗╢чЫгшБ╜ ---

    document.addEventListener('DOMContentLoaded', () => {
        // ЁЯМЯ щжЦцмбш╝ЙхЕецЩВя╝МхИЭхзЛхМЦцИ┐щЦУчЛАцЕЛцМЗчд║чЗИ
        updateRoomButtonStatus(); 

        // щаРшинцЧецЬЯчВ║ф╗Кхдй
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('checkDate').value = today;

        // х░ОшИкциЩч▒дщ╗ЮцУКф║Лф╗╢
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => {
               
                showPage(tab.getAttribute('data-target'));
            });
        });
        document.getElementById('calendarTab').addEventListener('click', () => {
             // щАЩшгбцЗЙх░ОшИкхИ░ calendarSettingPage
             showPage('calendarSettingPage'); 
        });
        document.getElementById('roomTitle').addEventListener('click', () => {
            showPage('roomSelectionPage'); // щ╗ЮцУКцИ┐щЦУхРНчи▒хПпш┐ФхЫЮщБ╕цУЗщаБ
      
        });
        
        // ЁЯМЯ щ╗ЮцквщА▒цЬЯщаБщЭвцЦ░хвЮя╝Ъш┐ФхЫЮщжЦщаБцМЙщИХф║Лф╗╢
        document.getElementById('backToHomeFromCalendar').addEventListener('click', () => {
            showPage('roomSelectionPage');
        });

        // цИ┐щЦУщбЮхЮЛхИЗцПЫ
        document.getElementById('meetingRoomTab').addEventListener('click', () => {
            document.getElementById('meetingRoomList').classList.remove('hidden');
            document.getElementById('lectureHallList').classList.add('hidden');
            document.getElementById('meetingRoomTab').classList.add('bg-blue-500', 'text-white');
            document.getElementById('meetingRoomTab').classList.remove('text-gray-600', 'hover:text-blue-500');
            document.getElementById('lectureHallTab').classList.remove('bg-blue-500', 'text-white');
            document.getElementById('lectureHallTab').classList.add('text-gray-600', 'hover:text-blue-500');
        });
        document.getElementById('lectureHallTab').addEventListener('click', () => {
            document.getElementById('meetingRoomList').classList.add('hidden');
            document.getElementById('lectureHallList').classList.remove('hidden');
            document.getElementById('lectureHallTab').classList.add('bg-blue-500', 'text-white');
            document.getElementById('lectureHallTab').classList.remove('text-gray-600', 'hover:text-blue-500');
            document.getElementById('meetingRoomTab').classList.remove('bg-blue-500', 'text-white');
            document.getElementById('meetingRoomTab').classList.add('text-gray-600', 'hover:text-blue-500');
        });
        // 2. цИ┐щЦУщБ╕цУЗцМЙщИХ
        document.querySelectorAll('.room-select-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                const btn = e.currentTarget;
                selectedRoom.name = btn.getAttribute('data-room');
                selectedRoom.type = btn.getAttribute('data-type');
                
  
                // цЫ┤цЦ░щ╗Юцквшбица╝щаБщЭвчЪДциЩщбМ
                document.getElementById('roomTitle').textContent = `${selectedRoom.type} - ${selectedRoom.name}`;
                document.getElementById('roomNotSelectedAlert').classList.add('hidden');
                
                // ш╖│ш╜ЙхИ░щ╗Юцквшбица╝щаБщЭв
                
                showPage('checkPage');
            });
        });
        // 3. щ╗ЮцквщаЕчЫохЦощБ╕цбЖцигх╝ПхИЗцПЫ
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                // чз╗щЩдхРМф╕Ач╡ДцЙАцЬЙцМЙщИХчЪД selected цигх╝П
                document.querySelectorAll(`input[name="${e.target.name}"] + .check-button`).forEach(btn => {
                    btn.classList.remove('selected');
              
                });
                // чВ║щБ╕ф╕нчЪДцМЙщИХхКаф╕К selected цигх╝П
                e.target.nextElementSibling.classList.add('selected');
            });
        });
        // 4. Modal чв║шкНцМЙщИХ
        document.getElementById('confirmSubmit').addEventListener('click', () => {
            document.getElementById('submitModal').classList.add('hidden');
        });

        // ЁЯМЯ щА▒цЬЯшинхоЪ Modal щВПш╝п
        document.getElementById('cycleFrequency').addEventListener('change', (e) => {
            const freq = e.target.value;
            document.getElementById('weeklyOptions').classList.add('hidden');
            document.getElementById('monthlyOptions').classList.add('hidden');
            
            if (freq === 'weekly') {
                document.getElementById('weeklyOptions').classList.remove('hidden');
            } else if (freq === 'monthly') {
                document.getElementById('monthlyOptions').classList.remove('hidden');
            }
        });

        document.getElementById('closeCycleSettingModal').addEventListener('click', () => {
            document.getElementById('cycleSettingFormModal').classList.add('hidden');
        });

        document.getElementById('cycleSettingForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const roomName = document.getElementById('cycleSettingRoomName').value;
            const frequency = document.getElementById('cycleFrequency').value;
            let details = null;
            
            if (frequency === 'weekly') {
                details = document.getElementById('cycleDayOfWeek').value;
            } else if (frequency === 'monthly') {
                details = document.getElementById('cycleDayOfMonth').value;
            }
            
            const room = roomData.find(r => r.name === roomName);
            if (room) {
                room.cycle = { frequency, details };
                saveRoomData(); // хД▓хнШхИ░ localStorage
                renderCycleListPage(); // щЗНцЦ░ц╕▓цЯУхИЧшби
                document.getElementById('cycleSettingFormModal').classList.add('hidden');
                alert(`х╖▓цИРхКЯчВ║ ${roomName} шинхоЪщА▒цЬЯчВ║ ${FREQUENCY_MAP[frequency] || 'чДбшинхоЪ'}`);
            }
        });

    });

    // 5. шбихЦоцПРф║д (ца╕х┐Г AJAX щВПш╝п - х╖▓цЦ░хвЮцЬмхЬ░хД▓хнШ)
    document.getElementById('checkForm').addEventListener('submit', async (event) => {
        // ЁЯЪи щШ╗цнвшбихЦочЪДщаРшинцПРф║дшбМчВ║я╝МщАЩцШпщШ▓цнвщаБщЭвхИ╖цЦ░чЪДщЧЬщН╡я╝Б
        event.preventDefault(); 
        
        if (!selectedRoom.name) {
            document.getElementById('roomNotSelectedAlert').classList.remove('hidden');
            alert('шлЛхЕИщБ╕цУЗшжБщ╗ЮцквчЪДцИ┐щЦУя╝Б');
            return;
        }

     
        const formData = {
            checkDate: document.getElementById('checkDate').value,
            roomType: selectedRoom.type,
            roomName: selectedRoom.name,
            
            // щ╗ЮцквщаЕчЫо (ф╜┐чФи name х▒мцАзф╛ЖхПЦх╛ЧщБ╕ф╕нчЪДхА╝)
            sound: document.querySelector('input[name="sound"]:checked')?.value || 'цЬкщ╗Юцкв',
            
            temperature: document.querySelector('input[name="temperature"]:checked')?.value || 'цЬкщ╗Юцкв',
            oil: document.querySelector('input[name="oil"]:checked')?.value || 'цЬкщ╗Юцкв',
            emergency: document.querySelector('input[name="emergency"]:checked')?.value || 'цЬкщ╗Юцкв',
            guard: document.querySelector('input[name="guard"]:checked')?.value ||
                'цЬкщ╗Юцкв',

            remarks: document.getElementById('remarks').value,
            inspector: document.getElementById('inspector').value,
        };
        
        // --- цЦ░хвЮя╝ЪцЬмхЬ░цХ╕цУЪшиШщМДщВПш╝п ---
        const isAbnormal = Object.keys(formData).some(key => 
            (key !== 'checkDate' && key !== 'roomType' && key !== 'roomName' && key !== 'inspector' && key !== 'remarks') && 
            formData[key] === 'чХ░х╕╕'
        );
        const newHistory = {
            id: `${formData.checkDate}-${selectedRoom.name}-${Date.now()}`, 
            date: formData.checkDate,
            inspector: formData.inspector,
            remarks: formData.remarks,
            isAbnormal: isAbnormal,
            ...formData // хМЕхРлцЙАцЬЙщ╗Юцквч╡РцЮЬ
        };
        
        // цЫ┤цЦ░цЬмхЬ░цХ╕цУЪ
        const room = roomData.find(r => r.name === selectedRoom.name);
        if (room) {
            room.history.push(newHistory);
        } else {
             // щБ┐хЕНхЬицПРф║дцЩВчЩ╝чП╛ц▓ТцЬЙ roomData шиШщМДя╝МщЫЦчД╢ updateRoomButtonStatus цЗЙшй▓шЩХчРЖф║Ж
             roomData.push({ 
                id: Date.now() + Math.random(), 
                name: selectedRoom.name, 
                type: selectedRoom.type, 
                status: isAbnormal ? 'abnormal' : 'normal', 
                history: [newHistory] ,
                cycle: { frequency: 'none', details: null } // ЁЯМЯ чв║ф┐ЭцЬЙщА▒цЬЯцмДф╜Н
            });
        }
        saveRoomData(); // хД▓хнШхИ░ localStorage
        // --- цЬмхЬ░цХ╕цУЪшиШщМДч╡РцЭЯ ---

        const submitBtn = document.getElementById('submitBtn');
        submitBtn.disabled = true;
        submitBtn.textContent = 'цПРф║дф╕н...';
        
        try {
            // ф╜┐чФи fetch х░Зш│ЗцЦЩф╗е POST цЦ╣х╝ПхВ│щБЮч╡ж Apps Script Web App
            const response = await fetch(WEB_APP_URL, {
                method: 'POST',
                mode: 'no-cors', // х┐ЕщаИшинхоЪчВ║ no-corsя╝МхЫачВ║цШпчЩ╝щАБхИ░ Apps Script чЪДчНичлЛч╢▓хЯЯ
                cache: 'no-cache',
    
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                // х░З JS чЙйф╗╢ш╜ЙцПЫчВ║ URLSearchParams ца╝х╝П
                body: new URLSearchParams(formData).toString() 
          
            });

            // цИРхКЯх╛М (Web App цЬГш┐ФхЫЮ 200 чЛАцЕЛчв╝я╝МхН│ф╜┐ mode: 'no-cors'я╝МшлЛц▒Вф╣ЯцЬГцИРхКЯ)
            
            // цЫ┤цЦ░ Modal ш│ЗшиК
            document.getElementById('modalRoomTitle').textContent = `${formData.roomType} - ${formData.roomName} (щ╗ЮцквцЧецЬЯ: ${formData.checkDate})`;
            document.getElementById('modalInspector').textContent = `щ╗Юцквф║║хУб: ${formData.inspector}`;
            
            // щбпчд║цИРхКЯ Modal
            document.getElementById('submitModal').classList.remove('hidden');
            
            // ц╕Ечй║шбихЦоя╝Иф┐ЭцМБцИ┐щЦУщБ╕цУЗхТМцЧецЬЯя╝Й
            document.getElementById('checkForm').reset();
            document.getElementById('checkDate').value = formData.checkDate;
            document.getElementById('remarks').value = '';

        } catch (error) {
            console.error('Submission error:', error);
            alert('цПРф║дхд▒цХЧя╝БщЫЦчД╢ш│ЗцЦЩх╖▓хД▓хнШцЦ╝чАПшж╜хЩия╝Мф╜ЖшлЛцквцЯецВичЪДч╢▓ш╖пцИЦ Web App URL цШпхРжцнгчв║уАВ');
            document.getElementById('submitModal').classList.remove('hidden'); // хН│ф╜┐ч╢▓ш╖пхд▒цХЧя╝МцЬмхЬ░хД▓хнШф╣ЯчоЧцИРхКЯ
        } finally {
            submitBtn.disabled = false;
            submitBtn.textContent = 'цПРф║дщ╗Юцквшбица╝';
            // цПРф║дх╛МцЫ┤цЦ░цИ┐щЦУчЛАцЕЛя╝Мчв║ф┐ЭцИ┐щЦУщБ╕цУЗщаБщЭвщбпчд║цЬАцЦ░чЛАцЕЛ
            updateRoomButtonStatus(); 
        }
    });

</script>
</body>
</html>
